<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="505px" preserveAspectRatio="none" style="width:2280px;height:505px;" version="1.1" viewBox="0 0 2280 505" width="2280px" zoomAndPan="magnify"><defs><filter height="300%" id="fje5l2qle7r1m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c27d767109b3913d4718b358a17ad24a]
cluster internal--><polygon fill="#FFFFFF" filter="url(#fje5l2qle7r1m)" points="1411,84,1471,84,1478,109.0679,1864,109.0679,1864,246,1411,246,1411,84" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1411" x2="1478" y1="109.0679" y2="109.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1415" y="100.9659">internal</text><!--MD5=[66de46875e9ca6c2e5f1890fb81f9fe4]
cluster pkg.httpcontext--><polygon fill="#FFFFFF" filter="url(#fje5l2qle7r1m)" points="1888,106.5,2008,106.5,2015,131.5679,2022,131.5679,2022,463,1888,463,1888,106.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1888" x2="2015" y1="131.5679" y2="131.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="1892" y="123.4659">pkg.httpcontext</text><!--MD5=[d90c695c32d4e95bb9451c21e63b0bfd]
cluster pkg.telemetry--><polygon fill="#FFFFFF" filter="url(#fje5l2qle7r1m)" points="2046,69,2151,69,2158,94.0679,2258,94.0679,2258,261,2046,261,2046,69" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2046" x2="2158" y1="94.0679" y2="94.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="2050" y="85.9659">pkg.telemetry</text><!--MD5=[d841c4c2f84d4e18d352f800547f43fc]
cluster platform--><polygon fill="#FFFFFF" filter="url(#fje5l2qle7r1m)" points="22,24,89,24,96,49.0679,1387,49.0679,1387,493,22,493,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="96" y1="49.0679" y2="49.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="26" y="40.9659">platform</text><!--MD5=[98c17e746b1aec6ba8c0d376f06b2a22]
class internal.DatabaseOption--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="92.9457" id="internal.DatabaseOption" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="1706.5" y="129.5"/><ellipse cx="1729.6" cy="145.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1732.5688,151.1406 Q1731.9906,151.4375 1731.35,151.5781 Q1730.7094,151.7344 1730.0063,151.7344 Q1727.5063,151.7344 1726.1781,150.0938 Q1724.8656,148.4375 1724.8656,145.3125 Q1724.8656,142.1875 1726.1781,140.5313 Q1727.5063,138.875 1730.0063,138.875 Q1730.7094,138.875 1731.35,139.0313 Q1732.0063,139.1875 1732.5688,139.4844 L1732.5688,142.2031 Q1731.9438,141.625 1731.35,141.3594 Q1730.7563,141.0781 1730.1313,141.0781 Q1728.7875,141.0781 1728.1,142.1563 Q1727.4125,143.2188 1727.4125,145.3125 Q1727.4125,147.4063 1728.1,148.4844 Q1728.7875,149.5469 1730.1313,149.5469 Q1730.7563,149.5469 1731.35,149.2813 Q1731.9438,149 1732.5688,148.4219 L1732.5688,151.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="1745.4" y="150.156">DatabaseOption</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1707.5" x2="1846.5" y1="161.5" y2="161.5"/><ellipse cx="1717.5" cy="172.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1726.5" y="177.2589">MaxOpenConns: int</text><ellipse cx="1717.5" cy="187.4819" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="1726.5" y="192.2408">MaxIdleConns: int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1707.5" x2="1846.5" y1="199.4638" y2="199.4638"/><ellipse cx="1717.5" cy="210.4638" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="1726.5" y="215.2227">Apply (client *sqlx.DB)</text><!--MD5=[81606ba0f826459e1b602f9ff0101a6f]
class internal.DatabaseProvider--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="107.9276" id="internal.DatabaseProvider" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="1427" y="122"/><ellipse cx="1496.25" cy="138" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1492.1719,133.7656 L1492.1719,131.6094 L1499.5625,131.6094 L1499.5625,133.7656 L1497.0938,133.7656 L1497.0938,141.8438 L1499.5625,141.8438 L1499.5625,144 L1492.1719,144 L1492.1719,141.8438 L1494.6406,141.8438 L1494.6406,133.7656 L1492.1719,133.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="1516.75" y="142.656">DatabaseProvider</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1428" x2="1670" y1="154" y2="154"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1435" y="162"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="1447" y="169.7589">mu: sync.Mutex</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1435" y="176.9819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="1447" y="184.7408">cache: map[string]*sqlx.DB</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1435" y="191.9638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="1447" y="199.7227">credentials: map[string]string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1428" x2="1670" y1="206.9457" y2="206.9457"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1435" y="214.9457"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="1447" y="222.7046">open: func(string, string) (*sqlx.DB, error)</text><!--MD5=[de03c539a5891f1233edfc307f400ecf]
class pkg.httpcontext.Value[T any]--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="62.9819" id="pkg.httpcontext.Value[T any]" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="1904.5" y="144.5"/><ellipse cx="1919.5" cy="160.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1922.4688,166.1406 Q1921.8906,166.4375 1921.25,166.5781 Q1920.6094,166.7344 1919.9063,166.7344 Q1917.4063,166.7344 1916.0781,165.0938 Q1914.7656,163.4375 1914.7656,160.3125 Q1914.7656,157.1875 1916.0781,155.5313 Q1917.4063,153.875 1919.9063,153.875 Q1920.6094,153.875 1921.25,154.0313 Q1921.9063,154.1875 1922.4688,154.4844 L1922.4688,157.2031 Q1921.8438,156.625 1921.25,156.3594 Q1920.6563,156.0781 1920.0313,156.0781 Q1918.6875,156.0781 1918,157.1563 Q1917.3125,158.2188 1917.3125,160.3125 Q1917.3125,162.4063 1918,163.4844 Q1918.6875,164.5469 1920.0313,164.5469 Q1920.6563,164.5469 1921.25,164.2813 Q1921.8438,164 1922.4688,163.4219 L1922.4688,166.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="1933.5" y="165.156">Value[T any]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1905.5" x2="2004.5" y1="176.5" y2="176.5"/><ellipse cx="1915.5" cy="187.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="1924.5" y="192.2589">Key: any</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1905.5" x2="2004.5" y1="199.4819" y2="199.4819"/><!--MD5=[94413c9a958ede3aa383f4bf6cbf7c55]
class pkg.httpcontext.any--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="48" id="pkg.httpcontext.any" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="1929" y="399"/><ellipse cx="1944" cy="415" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1946.9688,420.6406 Q1946.3906,420.9375 1945.75,421.0781 Q1945.1094,421.2344 1944.4063,421.2344 Q1941.9063,421.2344 1940.5781,419.5938 Q1939.2656,417.9375 1939.2656,414.8125 Q1939.2656,411.6875 1940.5781,410.0313 Q1941.9063,408.375 1944.4063,408.375 Q1945.1094,408.375 1945.75,408.5313 Q1946.4063,408.6875 1946.9688,408.9844 L1946.9688,411.7031 Q1946.3438,411.125 1945.75,410.8594 Q1945.1563,410.5781 1944.5313,410.5781 Q1943.1875,410.5781 1942.5,411.6563 Q1941.8125,412.7188 1941.8125,414.8125 Q1941.8125,416.9063 1942.5,417.9844 Q1943.1875,419.0469 1944.5313,419.0469 Q1945.1563,419.0469 1945.75,418.7813 Q1946.3438,418.5 1946.9688,417.9219 L1946.9688,420.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="1958" y="419.656">any</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1930" x2="1980" y1="431" y2="431"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1930" x2="1980" y1="439" y2="439"/><!--MD5=[9f7baa3bd5ce22608ae8a8de3db087f1]
class pkg.telemetry.Monitor--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="137.8913" id="pkg.telemetry.Monitor" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="2062.5" y="107"/><ellipse cx="2125.75" cy="123" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2128.7188,128.6406 Q2128.1406,128.9375 2127.5,129.0781 Q2126.8594,129.2344 2126.1563,129.2344 Q2123.6563,129.2344 2122.3281,127.5938 Q2121.0156,125.9375 2121.0156,122.8125 Q2121.0156,119.6875 2122.3281,118.0313 Q2123.6563,116.375 2126.1563,116.375 Q2126.8594,116.375 2127.5,116.5313 Q2128.1563,116.6875 2128.7188,116.9844 L2128.7188,119.7031 Q2128.0938,119.125 2127.5,118.8594 Q2126.9063,118.5781 2126.2813,118.5781 Q2124.9375,118.5781 2124.25,119.6563 Q2123.5625,120.7188 2123.5625,122.8125 Q2123.5625,124.9063 2124.25,125.9844 Q2124.9375,127.0469 2126.2813,127.0469 Q2126.9063,127.0469 2127.5,126.7813 Q2128.0938,126.5 2128.7188,125.9219 L2128.7188,128.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="44" x="2146.25" y="127.656">Monitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2063.5" x2="2240.5" y1="139" y2="139"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2070.5" y="147"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="2082.5" y="154.7589">mu: sync.Mutex</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2070.5" y="161.9819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="2082.5" y="169.7408">enabled: bool</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2070.5" y="176.9638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="2082.5" y="184.7227">state: map[string]*expvar.Int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2063.5" x2="2240.5" y1="191.9457" y2="191.9457"/><ellipse cx="2073.5" cy="202.9457" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="2082.5" y="207.7046">Enabled () bool</text><ellipse cx="2073.5" cy="217.9276" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="2082.5" y="222.6865">SetEnabled (enabled bool)</text><ellipse cx="2073.5" cy="232.9094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="2082.5" y="237.6684">Touch (name string)</text><!--MD5=[7de3ec76c7fd8a33a0ea4e6eeda76880]
class platform.DatabaseProvider--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="77.9638" id="platform.DatabaseProvider" style="stroke: #A80036; stroke-width: 1.5;" width="399" x="613.5" y="137"/><ellipse cx="760.25" cy="153" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M756.1719,148.7656 L756.1719,146.6094 L763.5625,146.6094 L763.5625,148.7656 L761.0938,148.7656 L761.0938,156.8438 L763.5625,156.8438 L763.5625,159 L756.1719,159 L756.1719,156.8438 L758.6406,156.8438 L758.6406,148.7656 L756.1719,148.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="780.75" y="157.656">DatabaseProvider</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="614.5" x2="1011.5" y1="169" y2="169"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="614.5" x2="1011.5" y1="177" y2="177"/><ellipse cx="624.5" cy="188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="345" x="633.5" y="192.7589">Open: Open (ctx context.Context, names ...string) (*sqlx.DB, error)</text><ellipse cx="624.5" cy="202.9819" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="373" x="633.5" y="207.7408">Connect: Connect (ctx context.Context, names ...string) (*sqlx.DB, error)</text><!--MD5=[782a8e96be819bf106532df41d80f0d1]
class platform.ErrorResponse--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="62.9819" id="platform.ErrorResponse" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="413.5" y="144.5"/><ellipse cx="451" cy="160.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M453.9688,166.1406 Q453.3906,166.4375 452.75,166.5781 Q452.1094,166.7344 451.4063,166.7344 Q448.9063,166.7344 447.5781,165.0938 Q446.2656,163.4375 446.2656,160.3125 Q446.2656,157.1875 447.5781,155.5313 Q448.9063,153.875 451.4063,153.875 Q452.1094,153.875 452.75,154.0313 Q453.4063,154.1875 453.9688,154.4844 L453.9688,157.2031 Q453.3438,156.625 452.75,156.3594 Q452.1563,156.0781 451.5313,156.0781 Q450.1875,156.0781 449.5,157.1563 Q448.8125,158.2188 448.8125,160.3125 Q448.8125,162.4063 449.5,163.4844 Q450.1875,164.5469 451.5313,164.5469 Q452.1563,164.5469 452.75,164.2813 Q453.3438,164 453.9688,163.4219 L453.9688,166.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="470" y="165.156">ErrorResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="414.5" x2="577.5" y1="176.5" y2="176.5"/><ellipse cx="424.5" cy="187.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="433.5" y="192.2589">Error: ErrorResponseBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="414.5" x2="577.5" y1="199.4819" y2="199.4819"/><!--MD5=[5d815c542bfd9967fd2dd1269cefa2b4]
class platform.ErrorResponseBody--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="77.9638" id="platform.ErrorResponseBody" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="595.5" y="384"/><ellipse cx="610.5" cy="400" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M613.4688,405.6406 Q612.8906,405.9375 612.25,406.0781 Q611.6094,406.2344 610.9063,406.2344 Q608.4063,406.2344 607.0781,404.5938 Q605.7656,402.9375 605.7656,399.8125 Q605.7656,396.6875 607.0781,395.0313 Q608.4063,393.375 610.9063,393.375 Q611.6094,393.375 612.25,393.5313 Q612.9063,393.6875 613.4688,393.9844 L613.4688,396.7031 Q612.8438,396.125 612.25,395.8594 Q611.6563,395.5781 611.0313,395.5781 Q609.6875,395.5781 609,396.6563 Q608.3125,397.7188 608.3125,399.8125 Q608.3125,401.9063 609,402.9844 Q609.6875,404.0469 611.0313,404.0469 Q611.6563,404.0469 612.25,403.7813 Q612.8438,403.5 613.4688,402.9219 L613.4688,405.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="624.5" y="404.656">ErrorResponseBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="596.5" x2="737.5" y1="416" y2="416"/><ellipse cx="606.5" cy="427" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="615.5" y="431.7589">Code: int</text><ellipse cx="606.5" cy="441.9819" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="615.5" y="446.7408">Message: string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="596.5" x2="737.5" y1="453.9638" y2="453.9638"/><!--MD5=[1627f773094eccd22977139fff0e2d35]
class platform.Middleware--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="62.9819" id="platform.Middleware" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="37.5" y="391.5"/><ellipse cx="112.25" cy="407.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M108.1719,403.2656 L108.1719,401.1094 L115.5625,401.1094 L115.5625,403.2656 L113.0938,403.2656 L113.0938,411.3438 L115.5625,411.3438 L115.5625,413.5 L108.1719,413.5 L108.1719,411.3438 L110.6406,411.3438 L110.6406,403.2656 L108.1719,403.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="63" x="132.75" y="412.156">Middleware</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="257.5" y1="423.5" y2="423.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="257.5" y1="431.5" y2="431.5"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="45.5" y="439.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="57.5" y="447.2589">type: func(http.Handler) http.Handler</text><!--MD5=[7af7408ac16c8b6615c78c02e6fc903d]
class platform.Module--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="107.9276" id="platform.Module" style="stroke: #A80036; stroke-width: 1.5;" width="267" x="293.5" y="369"/><ellipse cx="402.75" cy="385" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M398.6719,380.7656 L398.6719,378.6094 L406.0625,378.6094 L406.0625,380.7656 L403.5938,380.7656 L403.5938,388.8438 L406.0625,388.8438 L406.0625,391 L398.6719,391 L398.6719,388.8438 L401.1406,388.8438 L401.1406,380.7656 L398.6719,380.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="423.25" y="389.656">Module</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="294.5" x2="559.5" y1="401" y2="401"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="294.5" x2="559.5" y1="409" y2="409"/><ellipse cx="304.5" cy="420" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="313.5" y="424.7589">Name: Name () string</text><ellipse cx="304.5" cy="434.9819" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="313.5" y="439.7408">Start: Start (context.Context) error</text><ellipse cx="304.5" cy="449.9638" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="313.5" y="454.7227">Stop: Stop (context.Context) error</text><ellipse cx="304.5" cy="464.9457" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="241" x="313.5" y="469.7046">Mount: Mount (context.Context, Router) error</text><!--MD5=[358344282dfc8e3880b236ef018a4b77]
class platform.Options--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="92.9457" id="platform.Options" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="1047.5" y="129.5"/><ellipse cx="1084.1" cy="145.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1087.0688,151.1406 Q1086.4906,151.4375 1085.85,151.5781 Q1085.2094,151.7344 1084.5063,151.7344 Q1082.0063,151.7344 1080.6781,150.0938 Q1079.3656,148.4375 1079.3656,145.3125 Q1079.3656,142.1875 1080.6781,140.5313 Q1082.0063,138.875 1084.5063,138.875 Q1085.2094,138.875 1085.85,139.0313 Q1086.5063,139.1875 1087.0688,139.4844 L1087.0688,142.2031 Q1086.4438,141.625 1085.85,141.3594 Q1085.2563,141.0781 1084.6313,141.0781 Q1083.2875,141.0781 1082.6,142.1563 Q1081.9125,143.2188 1081.9125,145.3125 Q1081.9125,147.4063 1082.6,148.4844 Q1083.2875,149.5469 1084.6313,149.5469 Q1085.2563,149.5469 1085.85,149.2813 Q1086.4438,149 1087.0688,148.4219 L1087.0688,151.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="1102.9" y="150.156">Options</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1048.5" x2="1169.5" y1="161.5" y2="161.5"/><ellipse cx="1058.5" cy="172.5" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="1067.5" y="177.2589">ServerAddr: string</text><ellipse cx="1058.5" cy="187.4819" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="1067.5" y="192.2408">Quiet: bool</text><ellipse cx="1058.5" cy="202.4638" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="1067.5" y="207.2227">Modules: []string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1048.5" x2="1169.5" y1="214.4457" y2="214.4457"/><!--MD5=[89a2371b9a67e1b5a991d2e2bed80456]
class platform.Platform--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="182.837" id="platform.Platform" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1205.5" y="84.5"/><ellipse cx="1259.75" cy="100.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1255.6719,96.2656 L1255.6719,94.1094 L1263.0625,94.1094 L1263.0625,96.2656 L1260.5938,96.2656 L1260.5938,104.3438 L1263.0625,104.3438 L1263.0625,106.5 L1255.6719,106.5 L1255.6719,104.3438 L1258.1406,104.3438 L1258.1406,96.2656 L1255.6719,96.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="48" x="1280.25" y="105.156">Platform</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1206.5" x2="1369.5" y1="116.5" y2="116.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="124.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1225.5" y="132.2589">options: *Options</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="139.4819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1225.5" y="147.2408">router: *chi.Mux</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="154.4638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1225.5" y="162.2227">server: *http.Server</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="169.4457"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="1225.5" y="177.2046">listener: net.Listener</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="184.4276"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="1225.5" y="192.1865">context: context.Context</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="199.4094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="1225.5" y="207.1684">cancel: context.CancelFunc</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="214.3913"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="1225.5" y="222.1502">once: sync.Once</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="229.3732"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="1225.5" y="237.1321">registry: *Registry</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1206.5" x2="1369.5" y1="244.3551" y2="244.3551"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1213.5" y="252.3551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="1225.5" y="260.114">stop: func()</text><!--MD5=[4a6a894fdff7f4e5dbd894e3f89ef842]
class platform.Registry--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="227.7827" id="platform.Registry" style="stroke: #A80036; stroke-width: 1.5;" width="340" x="38" y="62"/><ellipse cx="181.25" cy="78" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M184.2188,83.6406 Q183.6406,83.9375 183,84.0781 Q182.3594,84.2344 181.6563,84.2344 Q179.1563,84.2344 177.8281,82.5938 Q176.5156,80.9375 176.5156,77.8125 Q176.5156,74.6875 177.8281,73.0313 Q179.1563,71.375 181.6563,71.375 Q182.3594,71.375 183,71.5313 Q183.6563,71.6875 184.2188,71.9844 L184.2188,74.7031 Q183.5938,74.125 183,73.8594 Q182.4063,73.5781 181.7813,73.5781 Q180.4375,73.5781 179.75,74.6563 Q179.0625,75.7188 179.0625,77.8125 Q179.0625,79.9063 179.75,80.9844 Q180.4375,82.0469 181.7813,82.0469 Q182.4063,82.0469 183,81.7813 Q183.5938,81.5 184.2188,80.9219 L184.2188,83.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="45" x="201.75" y="82.656">Registry</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="377" y1="94" y2="94"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="58" y="109.7589">mu: sync.RWMutex</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="116.9819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="58" y="124.7408">modules: []Module</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="131.9638"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="58" y="139.7227">middleware: []Middleware</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="377" y1="146.9457" y2="146.9457"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="154.9457"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="58" y="162.7046">cleanups: []func(context.Context)</text><ellipse cx="49" cy="172.9276" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="58" y="177.6865">Cleanup (fn func(context.Context))</text><ellipse cx="49" cy="187.9094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="58" y="192.6684">Clone () *Registry</text><ellipse cx="49" cy="202.8913" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="58" y="207.6502">Close (ctx context.Context)</text><ellipse cx="49" cy="217.8732" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="58" y="222.6321">Find (target any) bool</text><ellipse cx="49" cy="232.8551" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="58" y="237.614">Register (m Module)</text><ellipse cx="49" cy="247.837" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="314" x="58" y="252.5959">Start (ctx context.Context, mux Router, opts *Options) error</text><ellipse cx="49" cy="262.8189" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="58" y="267.5778">Stats () int</text><ellipse cx="49" cy="277.8008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="58" y="282.5597">Use (f Middleware)</text><!--MD5=[03302acdce61aa09c6ac2a47a3ed280c]
class platform.Router--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="62.9819" id="platform.Router" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="773.5" y="391.5"/><ellipse cx="806.5" cy="407.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M809.4688,413.1406 Q808.8906,413.4375 808.25,413.5781 Q807.6094,413.7344 806.9063,413.7344 Q804.4063,413.7344 803.0781,412.0938 Q801.7656,410.4375 801.7656,407.3125 Q801.7656,404.1875 803.0781,402.5313 Q804.4063,400.875 806.9063,400.875 Q807.6094,400.875 808.25,401.0313 Q808.9063,401.1875 809.4688,401.4844 L809.4688,404.2031 Q808.8438,403.625 808.25,403.3594 Q807.6563,403.0781 807.0313,403.0781 Q805.6875,403.0781 805,404.1563 Q804.3125,405.2188 804.3125,407.3125 Q804.3125,409.4063 805,410.4844 Q805.6875,411.5469 807.0313,411.5469 Q807.6563,411.5469 808.25,411.2813 Q808.8438,411 809.4688,410.4219 L809.4688,413.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="824.5" y="412.156">Router</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="774.5" x2="881.5" y1="423.5" y2="423.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="781.5" y="431.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="793.5" y="439.2589">type: chi.Router</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="774.5" x2="881.5" y1="446.4819" y2="446.4819"/><!--MD5=[add30b93225d231acb95dc49d76c1811]
class platform.UnimplementedModule--><rect fill="#FEFECE" filter="url(#fje5l2qle7r1m)" height="107.9276" id="platform.UnimplementedModule" style="stroke: #A80036; stroke-width: 1.5;" width="265" x="917.5" y="369"/><ellipse cx="982.75" cy="385" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M978.6719,380.7656 L978.6719,378.6094 L986.0625,378.6094 L986.0625,380.7656 L983.5938,380.7656 L983.5938,388.8438 L986.0625,388.8438 L986.0625,391 L978.6719,391 L978.6719,388.8438 L981.1406,388.8438 L981.1406,380.7656 L978.6719,380.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="126" x="1003.25" y="389.656">UnimplementedModule</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="918.5" x2="1181.5" y1="401" y2="401"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="918.5" x2="1181.5" y1="409" y2="409"/><ellipse cx="928.5" cy="420" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="937.5" y="424.7589">NameFn: func() string</text><ellipse cx="928.5" cy="434.9819" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="937.5" y="439.7408">StartFn: func(context.Context) error</text><ellipse cx="928.5" cy="449.9638" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="186" x="937.5" y="454.7227">StopFn: func(context.Context) error</text><ellipse cx="928.5" cy="464.9457" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="937.5" y="469.7046">MountFn: func(context.Context, Router) error</text><!--MD5=[2ebeda91e2a6c17c7893f4f2c4d9c560]
link pkg.httpcontext.Value[T any] to pkg.httpcontext.any--><path d="M1955,207.53 C1955,255.33 1955,347.16 1955,393.61 " fill="none" id="pkg.httpcontext.Value[T any]-&gt;pkg.httpcontext.any" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1955,398.77,1959,389.77,1955,393.77,1951,389.77,1955,398.77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1956" y="334.897">.Key</text><!--MD5=[18c80c55e6b8c6dbadea28db3d2382e9]
link platform.ErrorResponse to platform.ErrorResponseBody--><path d="M517.31,207.53 C547.56,250.87 603.05,330.38 637.31,379.46 " fill="none" id="platform.ErrorResponse-&gt;platform.ErrorResponseBody" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="640.35,383.82,638.4635,374.1535,637.4817,379.7245,631.9107,378.7427,640.35,383.82" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="608" y="334.897">.Error</text><!--MD5=[e3b860f28c5afe3bc1f819c62c72f835]
link platform.Registry to platform.Module--><path d="M309.17,290.18 C332.37,316.13 356.07,342.65 376.08,365.03 " fill="none" id="platform.Registry-&gt;platform.Module" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="379.51,368.88,376.5003,359.5023,376.1802,365.1501,370.5324,364.8299,379.51,368.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="351" y="334.897">.modules</text><!--MD5=[b9c6f07f2496d5ded784642acf3d07dc]
link platform.Registry to platform.Middleware--><path d="M180.28,290.18 C171.73,325.09 162.94,361.01 156.69,386.53 " fill="none" id="platform.Registry-&gt;platform.Middleware" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="155.47,391.49,161.5119,383.7121,156.6692,386.6359,153.7454,381.7933,155.47,391.49" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="174" y="334.897">.middleware</text><!--MD5=[4dc0a7eadcf9e4d23ec2ea4c41b2507a]
link platform.DatabaseProvider to platform.Options--><!--MD5=[bf48dbb1d6e71312169c5454a878bc25]
link platform.Options to platform.Platform--><!--MD5=[da69b8f63118d314bb6c53ec95cafa94]
link platform.DatabaseProvider to platform.Router--><!--MD5=[b69fa2d9437b1ccdf5c68382e95472b5]
link platform.Router to platform.UnimplementedModule--><!--MD5=[f8a32d8d6662653c8be7af9f6f719de7]
@startuml

class "internal.DatabaseOption" {
  + MaxOpenConns: int
  + MaxIdleConns: int
  + Apply (client *sqlx.DB)
}

interface "internal.DatabaseProvider" {
  - open: func(string, string) (*sqlx.DB, error)
  - mu: sync.Mutex
  - cache: map[string]*sqlx.DB
  - credentials: map[string]string
}

class "pkg.httpcontext.Value[T any]" {
  + Key: any
}

class "pkg.telemetry.Monitor" {
  - mu: sync.Mutex
  - enabled: bool
  - state: map[string]*expvar.Int
  + Enabled () bool
  + SetEnabled (enabled bool)
  + Touch (name string)
}

interface "platform.DatabaseProvider" {
  + Open: Open (ctx context.Context, names ...string) (*sqlx.DB, error)
  + Connect: Connect (ctx context.Context, names ...string) (*sqlx.DB, error)
}

class "platform.ErrorResponse" {
  + Error: ErrorResponseBody
}

class "platform.ErrorResponseBody" {
  + Code: int
  + Message: string
}

interface "platform.Middleware" {
  - type: func(http.Handler) http.Handler
}

interface "platform.Module" {
  + Name: Name () string
  + Start: Start (context.Context) error
  + Stop: Stop (context.Context) error
  + Mount: Mount (context.Context, Router) error
}

class "platform.Options" {
  + ServerAddr: string
  + Quiet: bool
  + Modules: []string
}

interface "platform.Platform" {
  - options: *Options
  - router: *chi.Mux
  - server: *http.Server
  - listener: net.Listener
  - context: context.Context
  - cancel: context.CancelFunc
  - stop: func()
  - once: sync.Once
  - registry: *Registry
}

class "platform.Registry" {
  - mu: sync.RWMutex
  - modules: []Module
  - middleware: []Middleware
  - cleanups: []func(context.Context)
  + Cleanup (fn func(context.Context))
  + Clone () *Registry
  + Close (ctx context.Context)
  + Find (target any) bool
  + Register (m Module)
  + Start (ctx context.Context, mux Router, opts *Options) error
  + Stats () int
  + Use (f Middleware)
}

class "platform.Router" {
  - type: chi.Router
}

interface "platform.UnimplementedModule" {
  + NameFn: func() string
  + StartFn: func(context.Context) error
  + StopFn: func(context.Context) error
  + MountFn: func(context.Context, Router) error
}



"pkg.httpcontext.Value[T any]" - -> "pkg.httpcontext.any" : .Key



"platform.ErrorResponse" - -> "platform.ErrorResponseBody" : .Error






"platform.Registry" - -> "platform.Module" : .modules
"platform.Registry" - -> "platform.Middleware" : .middleware




@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Ubuntu-125.10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>